class: Core
weight: 1
enabled: 1
modelNs: model
modelClass: CoreModel
viewNs: view
viewClass: CoreApi
templatesPath: view/templates
componentsNs: components
components:
  blocks:
    class: Block
    pages:
      - url: system/block/main-menu
        action: MainMenu
      - url: system/block/admin-menu
        action: AdminMenu
      - url: system/block/login-control
        action: LoginControl
  admin:
    class: Admin
    pages:
      - url: admin/logs
        action: Logs
      - url: admin/logs/reset
        action: LogsReset
      - url: admin/logs/type/(@strid)
        action: LogsByType
      - url: admin/logs/key/(@strid)
        action: LogsByKey
  role:
    class: Role
    pages:
      - url: role/list
        action: List
      - url: role/add
        action: Add
      - url: role/delete
        action: Delete
  user:
    class: User
    pages:
      - url: user/register
        action: Register
      - url: user/login
        action: Login
      - url: user/logout
        action: Logout
      - url: user/list
        action: List
      - url: user/add
        action: Add
      - url: user/([0-9]+)
        action: Read
      - url: user/([0-9]+)/edit
        action: Edit
      - url: user/([0-9]+)/delete
        action: Delete
      - url: user/([0-9]+)/add-role/([0-9]+)
        action: AddRole
      - url: user/([0-9]+)/delete-role/([0-9]+)
        action: DeleteRole
#  file:
#    class: File
#    pages:
#      - url: file/upload
#        action: Handler
#      - url: file
#        action: Handler
#      - url: file/thumbnail/(@strid)\.(jpe?g|gif|png)
#        action: Thumbnail
#      - url: file/(@strid)\.(@strid)
#        action: Download
  node:
    class: Node
    pages:
      # content/search
      - url: content/search
        action: Search
      # content/add/article
      - url: content/add/(@strid)
        action: Add
      # content/123/add/article
      - url: content/([0-9]+)/add/(@strid)
        action: Add2Node
      # content/123
      - url: content/([0-9]+)
        action: Read
      # content/about-me
      - url: content/(@strid)\.html
        action: ReadByUrn
      # content/123/edit
      - url: content/([0-9]+)/edit
        action: Edit
      # content/123/delete
      - url: content/([0-9]+)/delete
        action: Delete
      # content/123/move/after/234
      - url: content/([0-9]+)/move/(before|after)/([0-9]+)
        action: Move
  node_file:
    class: NodeFile
    pages:
      # content/123/file/images/about-me.jpg
      - url: content/([0-9]+)/file/(@strid)/(@strid\.@strid)
        action: Download
      - url: content/([0-9]+)/image/(@strid)/(@strid\.@strid)
        action: DownloadImage
      - url: content/([0-9]+)/file/(@strid)/upload
        action: Upload
#      - url: content/([0-9]+)/file/replace
#        action: ReplaceNode
#      - url: content/([0-9]+)/file/delete
#        action: DeleteNode
      - url: content/file/([0-9]+)/replace
        action: Replace
      - url: content/file/([0-9]+)/delete
        action: Delete
  node_image:
    class: NodeImage
    pages:
# content/123/img-type/images/testing-image.jpg
      # content/123/img-thumb/gallery/about-me.jpg
      - url: content/([0-9]+)/img-(@strid)/(@strid)/(@strid)\.(jpe?g|png|gif)
        action: GetVersion
      - url: content/image/([0-9]+)\.(jpe?g|png|gif)
        action: Get
#      - url: content/([0-9]+)/image/add
#        action: AddNode
#      - url: content/([0-9]+)/image/replace
#        action: ReplaceNode
#      - url: content/([0-9]+)/image/delete
#        action: DeleteNode
      - url: content/image/add
        action: Add
      - url: content/image/([0-9]+)/replace
        action: Replace
      - url: content/image/([0-9]+)/delete
        action: Delete
#  comment:
#    class: Comment
#    pages:
#      # content/123/comment/add
#      - url: content/([0-9]+)/comment/add
#        action: Add2Node
#      # user/3/add
#      - url: user/([0-9]+)/add
#        action: Add2User
#      # comment/3/add
#      - url: comment/([0-9]+)/add
#        action: Add2Comment
#      # comment/123/edit
#      - url: comment/([0-9]+)/edit
#        action: Update
#      # comment/123/delete
#      - url: comment/([0-9]+)/delete
#        action: Delete
#  term:
#    class: Term
#    pages:
#      - url: term/search
#        action: Search
  node_page:
    class: Page
    pages:
      - url: (@strid).html
        action: ReadByUrn
      - url:
        action: Home
      - url: .*
        action: NotFound